---
import Layout from '../layouts/Layout.astro';
import SectionHeading from '../components/SectionHeading.astro';
import Card from '../components/Card.astro';
import Terminal from '../components/Terminal.astro';
---

<Layout title="Contact - Gabri Ansaldo" description="Contact Gabri Ansaldo â€” email, LinkedIn, GitHub.">
  <section class="section">
    <div class="container">
      <SectionHeading 
        eyebrow="Contact"
        title="Get in Touch"
        subtitle="I'm always interested in discussing AI, product, and new opportunities"
      />
      
      <div class="grid-2">
        <!-- Contact Information -->
        <Card>
          <h3 class="text-accent mb-4">Contact Information</h3>
          <div class="space-y-4">
            <div>
              <div class="text-muted text-sm mb-1">Email</div>
              <a href="mailto:ansaldo.gabri@gmail.com" class="text-accent hover:text-text transition-colors">
                ansaldo.gabri@gmail.com
              </a>
            </div>
            <div>
              <div class="text-muted text-sm mb-1">Phone</div>
              <a href="tel:+18573831507" class="text-accent hover:text-text transition-colors">
                +1 (857) 383-1507
              </a>
            </div>
            <div>
              <div class="text-muted text-sm mb-1">Location</div>
              <div>San Francisco, CA</div>
            </div>
          </div>
        </Card>

        <!-- Professional Profiles -->
        <Card>
          <h3 class="text-accent mb-4">Professional Profiles</h3>
          <div class="space-y-4">
            <div>
              <div class="text-muted text-sm mb-1">LinkedIn</div>
              <a href="https://www.linkedin.com/in/gabrieleansaldo/" target="_blank" rel="noopener noreferrer" class="text-accent hover:text-text transition-colors">
                linkedin.com/in/gabrieleansaldo
              </a>
            </div>
            <div>
              <div class="text-muted text-sm mb-1">GitHub</div>
              <a href="https://github.com/gabriansa" target="_blank" rel="noopener noreferrer" class="text-accent hover:text-text transition-colors">
                github.com/gabriansa
              </a>
            </div>
            <div>
              <div class="text-muted text-sm mb-1">Focus Areas</div>
              <div>Product Management, Generative AI, Multi-Agent Systems</div>
            </div>
          </div>
        </Card>
      </div>

      <!-- Contact Form -->
      <div class="mt-8">
        <Card>
          <h3 class="text-accent mb-4">Send a Message</h3>
          <form id="contactForm" class="space-y-4">
            <div>
              <label for="name" class="block text-sm font-medium text-muted mb-2">Name</label>
              <input type="text" id="name" name="name" required class="w-full px-3 py-2 bg-surface border border-stroke rounded-md text-text focus:outline-none focus:border-accent transition-colors"/>
            </div>
            <div>
              <label for="email" class="block text-sm font-medium text-muted mb-2">Email</label>
              <input type="email" id="email" name="email" required class="w-full px-3 py-2 bg-surface border border-stroke rounded-md text-text focus:outline-none focus:border-accent transition-colors"/>
            </div>
            <div>
              <label for="subject" class="block text-sm font-medium text-muted mb-2">Subject</label>
              <input type="text" id="subject" name="subject" required class="w-full px-3 py-2 bg-surface border border-stroke rounded-md text-text focus:outline-none focus:border-accent transition-colors"/>
            </div>
            <div>
              <label for="message" class="block text-sm font-medium text-muted mb-2">Message</label>
              <textarea id="message" name="message" rows="4" required class="w-full px-3 py-2 bg-surface border border-stroke rounded-md text-text focus:outline-none focus:border-accent transition-colors"></textarea>
            </div>
            <button type="submit" class="btn w-full">
              Send Message
            </button>
          </form>
          <p class="text-sm text-muted mt-4">
            Note: This form will open your default email client with the message content. 
            For immediate contact, please use the email address above.
          </p>
        </Card>
      </div>
    </div>
  </section>

  <!-- Terminal Strip -->
  <section class="section bg-surface border-y border-stroke">
    <div class="container">
      <Terminal 
        lines={[
          'echo "Contact Information:"',
          'echo "Email: ansaldo.gabri@gmail.com"',
          'echo "Location: San Francisco, CA"',
          'echo "LinkedIn: linkedin.com/in/gabrieleansaldo"',
          'echo "GitHub: github.com/gabriansa"'
        ]}
        prefix="$"
        loop={true}
      />
    </div>
  </section>

  <script>
    const form = document.getElementById('contactForm');
    if (form) {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const messageEl = document.getElementById('message') as HTMLTextAreaElement;
        const subjectEl = document.getElementById('subject') as HTMLInputElement;
        
        if (messageEl && subjectEl && messageEl.value && subjectEl.value) {
          const subject = subjectEl.value.trim().substring(0, 1000); // Limit length
          const message = messageEl.value.trim().substring(0, 2000); // Limit length
          
          // Basic validation
          if (subject.length === 0 || message.length === 0) {
            alert('Please fill in both subject and message fields.');
            return;
          }
          
          // Create mailto URL with sanitized data
          const mailtoUrl = `mailto:ansaldo.gabri@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(message)}`;
          
          // Use window.open instead of window.location.href for better security
          window.open(mailtoUrl, '_blank');
        }
      });
    }
  </script>
</Layout>
